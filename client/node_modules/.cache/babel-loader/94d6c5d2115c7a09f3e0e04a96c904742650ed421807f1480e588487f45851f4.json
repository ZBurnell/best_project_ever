{"ast":null,"code":"import { Client } from \"langsmith\";\nimport { getEnvironmentVariable, getRuntimeEnvironment } from \"../../util/env.js\";\nimport { BaseTracer } from \"./tracer.js\";\nexport class LangChainTracer extends BaseTracer {\n  constructor() {\n    var _ref;\n    let fields = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(fields);\n    Object.defineProperty(this, \"name\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: \"langchain_tracer\"\n    });\n    Object.defineProperty(this, \"projectName\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"exampleId\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"client\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    const {\n      exampleId,\n      projectName,\n      client\n    } = fields;\n    this.projectName = (_ref = projectName !== null && projectName !== void 0 ? projectName : getEnvironmentVariable(\"LANGCHAIN_PROJECT\")) !== null && _ref !== void 0 ? _ref : getEnvironmentVariable(\"LANGCHAIN_SESSION\");\n    this.exampleId = exampleId;\n    this.client = client !== null && client !== void 0 ? client : new Client({});\n  }\n  async _convertToCreate(run) {\n    let example_id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    return {\n      ...run,\n      extra: {\n        ...run.extra,\n        runtime: await getRuntimeEnvironment()\n      },\n      child_runs: undefined,\n      session_name: this.projectName,\n      reference_example_id: run.parent_run_id ? undefined : example_id\n    };\n  }\n  async persistRun(_run) {}\n  async _persistRunSingle(run) {\n    const persistedRun = await this._convertToCreate(run, this.exampleId);\n    await this.client.createRun(persistedRun);\n  }\n  async _updateRunSingle(run) {\n    const runUpdate = {\n      end_time: run.end_time,\n      error: run.error,\n      outputs: run.outputs,\n      events: run.events\n    };\n    await this.client.updateRun(run.id, runUpdate);\n  }\n  async onRetrieverStart(run) {\n    await this._persistRunSingle(run);\n  }\n  async onRetrieverEnd(run) {\n    await this._updateRunSingle(run);\n  }\n  async onRetrieverError(run) {\n    await this._updateRunSingle(run);\n  }\n  async onLLMStart(run) {\n    await this._persistRunSingle(run);\n  }\n  async onLLMEnd(run) {\n    await this._updateRunSingle(run);\n  }\n  async onLLMError(run) {\n    await this._updateRunSingle(run);\n  }\n  async onChainStart(run) {\n    await this._persistRunSingle(run);\n  }\n  async onChainEnd(run) {\n    await this._updateRunSingle(run);\n  }\n  async onChainError(run) {\n    await this._updateRunSingle(run);\n  }\n  async onToolStart(run) {\n    await this._persistRunSingle(run);\n  }\n  async onToolEnd(run) {\n    await this._updateRunSingle(run);\n  }\n  async onToolError(run) {\n    await this._updateRunSingle(run);\n  }\n}","map":{"version":3,"names":["Client","getEnvironmentVariable","getRuntimeEnvironment","BaseTracer","LangChainTracer","constructor","_ref","fields","arguments","length","undefined","Object","defineProperty","enumerable","configurable","writable","value","exampleId","projectName","client","_convertToCreate","run","example_id","extra","runtime","child_runs","session_name","reference_example_id","parent_run_id","persistRun","_run","_persistRunSingle","persistedRun","createRun","_updateRunSingle","runUpdate","end_time","error","outputs","events","updateRun","id","onRetrieverStart","onRetrieverEnd","onRetrieverError","onLLMStart","onLLMEnd","onLLMError","onChainStart","onChainEnd","onChainError","onToolStart","onToolEnd","onToolError"],"sources":["C:/Users/zackb/OneDrive/Desktop/Bootcamp/best_project_ever/client/node_modules/langchain/dist/callbacks/handlers/tracer_langchain.js"],"sourcesContent":["import { Client } from \"langsmith\";\nimport { getEnvironmentVariable, getRuntimeEnvironment, } from \"../../util/env.js\";\nimport { BaseTracer } from \"./tracer.js\";\nexport class LangChainTracer extends BaseTracer {\n    constructor(fields = {}) {\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { exampleId, projectName, client } = fields;\n        this.projectName =\n            projectName ??\n                getEnvironmentVariable(\"LANGCHAIN_PROJECT\") ??\n                getEnvironmentVariable(\"LANGCHAIN_SESSION\");\n        this.exampleId = exampleId;\n        this.client = client ?? new Client({});\n    }\n    async _convertToCreate(run, example_id = undefined) {\n        return {\n            ...run,\n            extra: {\n                ...run.extra,\n                runtime: await getRuntimeEnvironment(),\n            },\n            child_runs: undefined,\n            session_name: this.projectName,\n            reference_example_id: run.parent_run_id ? undefined : example_id,\n        };\n    }\n    async persistRun(_run) { }\n    async _persistRunSingle(run) {\n        const persistedRun = await this._convertToCreate(run, this.exampleId);\n        await this.client.createRun(persistedRun);\n    }\n    async _updateRunSingle(run) {\n        const runUpdate = {\n            end_time: run.end_time,\n            error: run.error,\n            outputs: run.outputs,\n            events: run.events,\n        };\n        await this.client.updateRun(run.id, runUpdate);\n    }\n    async onRetrieverStart(run) {\n        await this._persistRunSingle(run);\n    }\n    async onRetrieverEnd(run) {\n        await this._updateRunSingle(run);\n    }\n    async onRetrieverError(run) {\n        await this._updateRunSingle(run);\n    }\n    async onLLMStart(run) {\n        await this._persistRunSingle(run);\n    }\n    async onLLMEnd(run) {\n        await this._updateRunSingle(run);\n    }\n    async onLLMError(run) {\n        await this._updateRunSingle(run);\n    }\n    async onChainStart(run) {\n        await this._persistRunSingle(run);\n    }\n    async onChainEnd(run) {\n        await this._updateRunSingle(run);\n    }\n    async onChainError(run) {\n        await this._updateRunSingle(run);\n    }\n    async onToolStart(run) {\n        await this._persistRunSingle(run);\n    }\n    async onToolEnd(run) {\n        await this._updateRunSingle(run);\n    }\n    async onToolError(run) {\n        await this._updateRunSingle(run);\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}